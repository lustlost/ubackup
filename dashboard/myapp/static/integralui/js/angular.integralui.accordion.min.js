/*
  filename: angular.integralui.accordion.min.js
  version : 1.0.7
  Copyright © 2014-2016 Lidor Systems. All rights reserved.

  This file is part of the "IntegralUI" Library. 
                                                                   
  The contents of this file are subject to the IntegralUI Studio for Web License, and may not be used except in compliance with the License.
  A copy of the License should have been installed in the product's root installation directory or it can be found at
  http://www.lidorsystems.com/products/web/studio/license-agreement.aspx.
                                                            
  This SOFTWARE is provided "AS IS", WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for the specific language 
  governing rights and limitations under the License. Any infringement will be prosecuted under applicable laws.                           
*/
angular.module("integralui").factory("IntegralUIAccordionService",["$rootScope","IntegralUIPublicService",function(c,k){return{addGroup:function(e,d){c.$broadcast(e+"-add-group",d)},clearGroups:function(e){c.$broadcast(e+"-clear-groups")},insertGroupAt:function(e,d,f){c.$broadcast(e+"-insert-group-at",d,f)},insertGroupBefore:function(e,d,f){c.$broadcast(e+"-insert-group-before",d,f)},insertGroupAfter:function(e,d,f){c.$broadcast(e+"-insert-group-after",d,f)},removeGroup:function(e,d){c.$broadcast(e+"-remove-group",d)},removeGroupAt:function(e,d){c.$broadcast(e+"-remove-group-at",d)},loadData:function(e,d,f){c.$broadcast(e+"-load-data",d,f)},findGroupById:function(e,d){c.$broadcast(e+"-find-group-by-id",d);var f=this.getTempData();this.clearTempData();return f?f:null},findGroupByText:function(e,d){c.$broadcast(e+"-find-group-by-text",d);var f=this.getTempData();this.clearTempData();return f?f:null},clearTempData:function(){tempData=null},getList:function(e,d){c.$broadcast(e+"-get-list",d);var f=this.getTempData();this.clearTempData();return f?f:[]},getTempData:function(){return tempData},setTempData:function(c){tempData=c},selectedGroup:function(e,d){if(d)c.$broadcast(e+"-set-selected-group",d);else{c.$broadcast(e+"-get-selected-group");var f=this.getTempData();this.clearTempData();return f?f:null}},refresh:function(e){c.$broadcast(e+"-refresh")},resumeLayout:function(e){c.$broadcast(e+"-resume-layout")},suspendLayout:function(e){c.$broadcast(e+"-suspend-layout")},updateLayout:function(e){c.$broadcast(e+"-update-layout")}}}]).controller("IntegralUIAccordionController",["$scope","$element","IntegralUIInternalService","IntegralUIDataService","IntegralUIAccordionService","$timeout",function(c,k,e,d,f,p){var b=this;b.defaultStyle={general:"iui-accordion",group:{general:"iui-accordion-group",header:{content:"iui-accordion-group-header-content",disabled:"iui-accordion-group-header-disabled",focused:"iui-accordion-group-header-focused",normal:"iui-accordion-group-header",hovered:"iui-accordion-group-header-hovered",selected:"iui-accordion-group-header-selected"},content:{disabled:"iui-accordion-group-content-disabled",focused:"iui-accordion-group-content-focused",normal:"iui-accordion-group-content",hovered:"iui-accordion-group-content-hovered",selected:"iui-accordion-group-content-selected"}}};b.options={};this.updateOptions=function(a){a?(b.options={controlStyle:b.defaultStyle,enabled:e.isFieldAvailable(a.enabled,!0),expandDirection:e.isFieldAvailable(a.expandDirection,"down"),groupIcon:e.isFieldAvailable(a.groupIcon,""),headerContentOrientation:e.isFieldAvailable(a.headerContentOrientation,"horizontal"),hoverGroup:null,hoverSelection:e.isFieldAvailable(a.hoverSelection,!1),rtl:e.isFieldAvailable(a.rtl,!1),selectedGroup:e.isFieldAvailable(a.selectedGroup,b.options.selectedGroup?b.options.selectedGroup:null),showIcons:e.isFieldAvailable(a.showIcons,!0)},b.updateDataFields(a.dataFields),b.updateControlStyle(a.controlStyle)):(b.options={controlStyle:b.defaultStyle,enabled:!0,expandDirection:"down",groupIcon:"",headerContentOrientation:"horizontal",hoverGroup:null,hoverSelection:!1,rtl:!1,selectedGroup:null,showIcons:!0},b.updateDataFields())};this.updateDataFields=function(a){b.options.dataFields=a?{content:a.content?a.content:"content",enabled:a.enabled?a.enabled:"enabled",expanded:a.expanded?a.expanded:"expanded",icon:a.icon?a.icon:"icon",id:a.id?a.id:"id",name:a.name?a.name:"name",selected:a.selected?a.selected:"selected",style:a.style?a.style:"style",text:a.text?a.text:"text",value:a.value?a.value:"value",visible:a.visible?a.visible:"visible"}:{content:"content",enabled:"enabled",expanded:"expanded",icon:"icon",id:"id",name:"name",selected:"selected",style:"style",text:"text",value:"value",visible:"visible"};b.dataObj&&b.dataObj.updateDataFields(b.options.dataFields)};b.updateOptions();c.$on(c.name+"-add-group",function(a,c){b.dataObj.insertAt(c,-1,null,b.groupIsAdded)});c.$on(c.name+"-clear-groups",function(a){b.dataObj.clear(null,b.listIsCleared)});c.$on(c.name+"-insert-group-at",function(a,c,d){b.dataObj.insertAt(c,d,null,b.groupIsAdded)});c.$on(c.name+"-insert-group-after",function(a,c,d){b.dataObj.insertByRef(c,d,!0,b.groupIsAdded)});c.$on(c.name+"-insert-group-before",function(a,c,d){b.dataObj.insertByRef(c,d,!1,b.groupIsAdded)});c.$on(c.name+"-remove-group",function(a,c){b.dataObj.removeAt(c,-1,null,b.groupIsRemoved)});c.$on(c.name+"-remove-group-at",function(a,c){b.dataObj.removeAt(null,c,null,b.groupIsRemoved)});this.listIsCleared=function(){b.options.selectedGroup=null;b.updateLayout()};this.groupIsAdded=function(){b.updateLayout()};this.groupIsRemoved=function(a,c,d){a&&(a.selected=!1,a==b.options.selectedGroup&&(b.options.selectedGroup=null));b.updateLayout()};this.addGroupScope=function(a){a&&(b.groupScopeList.push(a),b.updateLayout&&b.updateLayout())};this.removeGroupScope=function(a){a=b.groupScopeList.indexOf(a);0<=a&&b.groupScopeList.splice(a,1)};this.currentList=[];this.currentScopeList=[];this.getCurrentList=function(){return b.currentList};this.updateCurrentList=function(){b.currentList.length=0;var a=b.dataObj.getList();if(a)for(var c=0;c<a.length;c++){var d=a[c];b.isGroupVisible(d)&&(d.type="group",d[b.options.dataFields.id]||(d[b.options.dataFields.id]=e.getUniqueId()),b.currentList.push(d))}};this.updateCurrentScopeList=function(){for(var a=b.currentScopeList.length=0;a<b.currentList.length;a++){var c=b.getScopeByGroup(b.currentList[a]);c&&b.currentScopeList.push(c)}};this.groupScopeList=[];this.dataEvents={clear:function(a){return angular.isDefined(c.events)&&c.events.clear?c.events.clear():c.clear()},objAdded:function(a){return angular.isDefined(c.events)&&c.events.groupAdded?c.events.groupAdded({group:a.e.obj}):c.groupAdded(a)},objAdding:function(a){return angular.isDefined(c.events)&&c.events.groupAdding?c.events.groupAdding({group:a.e.obj}):c.groupAdding(a)},objRemoved:function(a){return angular.isDefined(c.events)&&c.events.groupRemoved?c.events.groupRemoved({group:a.e.obj}):c.groupRemoved(a)},objRemoving:function(a){return angular.isDefined(c.events)&&c.events.groupRemoving?c.events.groupRemoving({group:a.e.obj}):c.groupRemoving(a)}};this.getDataFields=function(a){return{content:a.content?a.content:"content",icon:a.icon?a.icon:"icon",id:a.id?a.id:"id",objects:a.groups?a.groups:"groups",text:a.text?a.text:"text"}};b.dataObj=new d({objects:c.groups,events:b.dataEvents,fields:b.getDataFields(b.options.dataFields)});c.$on(c.name+"-load-data",function(a,c,d){b.loadData(c,d)});this.loadData=function(a,g){b.allowEvents=!1;b.updateDataFields(g);var e=[];b.dataObj.clear(null,b.listIsCleared);a&&(e=a);if(angular.isDefined(c.groups))for(var f=c.groups.length=0;f<e.length;f++)c.groups.push(e[f]);b.dataObj=new d({objects:c.groups,events:b.dataEvents,fields:b.getDataFields(b.options.dataFields)});b.updateLayout();b.allowEvents=!0};this.allowEvents=!0;this.callAfterCollapse=function(a){angular.isDefined(c.events)&&c.events.afterCollapse?c.events.afterCollapse({group:a}):c.afterCollapse({e:{group:a}})};this.callAfterExpand=function(a){angular.isDefined(c.events)&&c.events.afterExpand?c.events.afterExpand({group:a}):c.afterExpand({e:{group:a}})};this.callAfterSelect=function(a){angular.isDefined(c.events)&&c.events.afterSelect?c.events.afterSelect({group:a}):c.afterSelect({e:{group:a}});angular.isDefined(c.events)&&c.events.selectionChanged?c.events.selectionChanged({group:a}):c.selectionChanged({e:{group:a}})};this.callBeforeCollapse=function(a){var b=!0;return b=angular.isDefined(c.events)&&c.events.beforeCollapse?c.events.beforeCollapse({group:a}):c.beforeCollapse({e:{group:a}})};this.callBeforeExpand=function(a){var b=!0;return b=angular.isDefined(c.events)&&c.events.beforeExpand?c.events.beforeExpand({group:a}):c.beforeExpand({e:{group:a}})};this.callEnabledChanged=function(a){angular.isDefined(c.events)&&c.events.enabledChanged?c.events.enabledChanged({enabled:a}):c.enabledChanged({e:{enabled:a}})};this.callGroupClick=function(a,b){angular.isDefined(c.events)&&c.events.groupClick?c.events.groupClick({group:a,mousePos:b}):c.groupClick({e:{group:a,mousePos:b}})};this.callGroupDblClick=function(a,b){angular.isDefined(c.events)&&c.events.groupDblClick?c.events.groupDblClick({group:a,mousePos:b}):c.groupDblclick({e:{group:a,mousePos:b}})};this.callGroupHover=function(a){angular.isDefined(c.events)&&c.events.groupHover?c.events.groupHover({group:a}):c.groupHover({e:{group:a}})};this.callGroupRightClick=function(a,b){angular.isDefined(c.events)&&c.events.groupRightClick?c.events.groupRightClick({group:a,mousePos:b}):c.groupRightclick({e:{group:a,mousePos:b}})};this.callStyleChanged=function(a){angular.isDefined(c.events)&&c.events.styleChanged?c.events.styleChanged({style:a}):c.styleChanged({e:{style:a}})};c.$on(c.name+"-find-group-by-id",function(a,c){f.setTempData(b.findGroupById(c))});c.$on(c.name+"-find-group-by-text",function(a,c){f.setTempData(b.findGroupByText(c))});this.findGroupById=function(a){return b.dataObj.findObjectById(a)};this.findGroupByText=function(a){return b.dataObj.findObjectByText(a)};this.findScopeByName=function(a){for(var c=null,d=0;d<b.groupScopeList.length;d++)if(b.groupScopeList[d].name==a){c=b.groupScopeList[d];break}return c};c.$on(c.name+"-get-ctrl",function(a){e.setTempData(b)});c.$on(c.name+"-get-list",function(a,c){1==c?f.setTempData(b.getList()):f.setTempData(b.getCurrentList())});this.getGroupByScope=function(a){return a&&(a=b.getGroupScopeIndex(a),b.isIndexInRange(a))?b.currentList[a]:null};this.getGroupCurrentIndex=function(a){return a&&b.currentList?b.currentList.indexOf(a):-1};this.getGroupScopeIndex=function(a){return a&&b.currentScopeList?b.currentScopeList.indexOf(a):-1};this.getGroupState=function(a){if(a){if(0==b.options.enabled||0==a[b.options.dataFields.enabled])return"disabled";if(a==b.options.selectedGroup)return"selected";if(a==b.options.hoverGroup)return"hovered"}return"normal"};this.getList=function(){return b.dataObj.getList()};this.getScopeByGroup=function(a){return a?b.findScopeByName(a[b.options.dataFields.name]):null};this.isGroupEnabled=function(a){return e.isEnabled(a[b.options.dataFields.enabled])};this.isGroupVisible=function(a){return a&&0!=a[b.options.dataFields.visible]?!0:!1};this.isIndexInRange=function(a){return 0<=a&&a<b.currentList.length};this.setHoverGroup=function(a){(a=b.getGroupByScope(a))?(b.options.hoverGroup=a,b.callGroupHover(a)):b.options.hoverGroup=null};b.allowUpdate=!0;this.suspendLayout=function(){b.allowUpdate=!1};this.resumeLayout=function(){b.allowUpdate=!0;b.updateLayout()};c.$on(c.name+"-refresh",function(a){b.refresh()});c.$on(c.name+"-resume-layout",function(a){b.resumeLayout()});c.$on(c.name+"-suspend-layout",function(a){b.suspendLayout()});c.$on(c.name+"-update-layout",function(a){b.updateLayout()});this.selectionCancelled=!1;c.$on(c.name+"-get-selected-group",function(a){f.setTempData(b.groupSelection())});c.$on(c.name+"-set-selected-group",function(a,c){b.groupSelection(c)});this.groupSelection=function(a,d){if(a){if(b.isGroupEnabled(a)){var f=b.groupSelection(),h=!0;f&&(h=!e.isEqual(f[b.options.dataFields.id],a[b.options.dataFields.id]));h&&(h=!0,h=angular.isDefined(c.events)&&c.events.beforeSelect?c.events.beforeSelect({group:a}):c.beforeSelect({e:{group:a}}),b.selectionCancelled=0==h,0!=h&&(h=null,f&&(b.callBeforeCollapse(f),(h=b.getScopeByGroup(f))&&h.collapse(),f.selected=!1,b.updateGroup(f)),b.options.selectedGroup=a,a[b.options.dataFields.selected]=!0,b.callBeforeExpand(a),b.callAfterSelect(a),f&&b.callAfterCollapse(f),(h=b.getScopeByGroup(a))&&h.collapse(),b.callAfterExpand(a),b.updateLayout()))}}else return b.options.selectedGroup};this.selectGroup=function(a){(a=b.getGroupByScope(a))&&b.groupSelection(a)};this.updateSelectionStatus=function(a,c){var d=b.getGroupByScope(a);d&&(d[b.options.dataFields.selected]=c)};var m=function(a){if(a){var c=e.isFieldAvailable(a.general,"iui-accordion-group"),d;d=a.general;d=e.isString(d)?d:d?{content:e.isFieldAvailable(d.content,"iui-accordion-group-header-content"),disabled:e.isFieldAvailable(d.disabled,"iui-accordion-group-header-disabled"),focused:e.isFieldAvailable(d.focused,"iui-accordion-group-header-focused"),normal:e.isFieldAvailable(d.normal,"iui-accordion-group-header"),hovered:e.isFieldAvailable(d.hovered,"iui-accordion-group-header-hovered"),selected:e.isFieldAvailable(d.selected,"iui-accordion-group-header-selected")}:b.options.controlStyle.group.header;a=a.content;a=e.isString(a)?a:a?{disabled:e.isFieldAvailable(a.disabled,"iui-accordion-group-content-disabled"),focused:e.isFieldAvailable(a.focused,"iui-accordion-group-content-focused"),normal:e.isFieldAvailable(a.normal,"iui-accordion-group-content"),hovered:e.isFieldAvailable(a.hovered,"iui-accordion-group-content-hovered"),selected:e.isFieldAvailable(a.selected,"iui-accordion-group-content-selected")}:b.options.controlStyle.group.content;return{general:c,header:d,content:a}}return b.options.controlStyle.group};this.updateControlStyle=function(a){b.options.controlStyle=a?{general:e.isFieldAvailable(a.general,"iui-accordion"),group:m(a.group)}:{general:e.isFieldAvailable(b.defaultStyle.general,"iui-accordion"),group:m(b.defaultStyle.group)}};this.getCurrentGroupStyle=function(a){var c=b.options.controlStyle.group;if(a)switch(a.style){case "initial":break;default:null!=a.style&&(c=a.style)}return c?c:b.options.controlStyle.group};this.getCurrentGroupHeaderStyle=function(a,c){if(!a)return"";switch(c){case "content":return a&&a.content?a.content:b.options.controlStyle.group.header.content;case "disabled":return a&&a.disabled?a.disabled:b.options.controlStyle.group.header.disabled;case "focused":return a&&a.focused?a.focused:b.options.controlStyle.group.header.focused;case "hovered":return a&&a.hovered?a.hovered:b.options.controlStyle.group.header.hovered;case "selected":return a&&a.selected?a.selected:b.options.controlStyle.group.header.selected;default:return a&&a.normal?a.normal:b.options.controlStyle.group.header.normal}};this.getCurrentGroupContentStyle=function(a,c){if(!a)return"";switch(c){case "disabled":return a&&a.disabled?a.disabled:b.options.controlStyle.group.content.disabled;case "focused":return a&&a.focused?a.focused:b.options.controlStyle.group.content.focused;case "hovered":return a&&a.hovered?a.hovered:b.options.controlStyle.group.content.hovered;case "selected":return a&&a.selected?a.selected:b.options.controlStyle.group.content.selected;default:return a&&a.normal?a.normal:b.options.controlStyle.group.content.normal}};this.updateGroup=function(a){(a=b.getScopeByGroup(a))&&a.refresh()};c.$watch("controlStyle",function(a,c){a!==c&&(b.updateControlStyle(a),b.refresh(),b.callStyleChanged(a))});c.$watch("enabled",function(a,c){a!==c&&(b.options.enabled=a,b.refresh(),b.callEnabledChanged(a))});c.$watch("expandDirection",function(a,c){a!==c&&(b.options.expandDirection=a,b.updateLayout())});c.$watch("fields",function(a,c){a!==c&&(b.options.dataFields=a,b.UpdateData())});c.$watch("groupIcon",function(a,c){a!==c&&(b.options.groupIcon=a,b.updateLayout())});c.$watch("headerContentOrientation",function(a,c){a!==c&&(b.options.headerContentOrientation=a,b.updateLayout())});c.$watch("hoverSelection",function(a,c){a!==c&&(b.options.hoverSelection=a)});c.$watch("options",function(a,c){a!==c&&(b.updateOptions(a),b.updateLayout())},!0);c.$watch("rtl",function(a,c){a!==c&&(b.options.rtl=a,b.updateLayout())});c.$watch("selectedGroup",function(a,c){a!==c&&(c&&(c.selected=!1),b.options.selectedGroup=a,b.callAfterSelect(a))});c.$watch("showIcons",function(a,c){a!==c&&(b.options.showIcons=a,b.updateLayout())})}]).directive("iuiAccordion",["$timeout","$interval","IntegralUIInternalService",function(c,k,e){return{restrict:"EA",controller:"IntegralUIAccordionController",transclude:!0,replace:!0,template:'<div class="iui-accordion" data-element="accordion" ng-transclude></div>',scope:{controlStyle:"=",enabled:"=",expandDirection:"@",fields:"=",groupIcon:"=",groups:"=",headerContentOrientation:"@",hoverSelection:"=",name:"@",options:"=?",rtl:"=",selectedGroup:"=",showIcons:"=",afterCollapse:"&",afterExpand:"&",afterSelect:"&",beforeCollapse:"&",beforeExpand:"&",beforeSelect:"&",clear:"&",enabledChanged:"&",events:"=?",groupAdded:"&",groupAdding:"&",groupClick:"&",groupDblclick:"&",groupHover:"&",groupRemoved:"&",groupRemoving:"&",groupRightclick:"&",selectionChanged:"&",styleChanged:"&"},link:function(d,f,p,b,m){var a=this;d.$on("$destroy",function(b){a.s2t()});var g=null;b.elemSize=function(){return{width:f[0].clientWidth,height:f[0].clientHeight}};var l=function(){for(var a=0,c=0,d={top:0,right:0,bottom:0,left:0},n=f.children(),g=null,h=b.getList(),k=0;k<n.length;k++)k<h.length&&0!=h[k][b.options.dataFields.visible]&&(a+=d.left,c+=d.top,g=angular.element(n.eq(k)),d=e.getMargin(g[0]),g.css("position","absolute"),"left"==b.options.expandDirection||"right"==b.options.expandDirection?(g.css("top","0"),g.css("left",a+"px")):(g.css("top",c+"px"),g.css("left",0)),a+=g[0].offsetWidth+d.right,c+=g[0].offsetHeight+d.bottom);"left"==b.options.expandDirection||"right"==b.options.expandDirection?f.css("width",a+"px"):f.css("height",c+"px");a=b.getGroupCurrentIndex(b.options.selectedGroup);0<=a&&a<b.currentScopeList.length&&b.currentScopeList[a].showContent()},h=function(a){a<b.currentScopeList.length&&(g!=b.currentScopeList[a]&&(g=b.currentScopeList[a],groupSize=g.updateLayout()),g.updateComplete?a==b.currentScopeList.length-1?l():c(function(){h(a+1)},1):c(function(){h(a)},1))},n=function(a){for(var b=null,c=f.children(),d=0;d<c.length;d++){var e=angular.element(c.eq(d));if(e&&e[0].attributes&&e[0].attributes.name&&e[0].attributes.name.value==a){b=e;break}}return b};b.updateLayout=function(){if(b.allowUpdate){b.updateCurrentList();b.updateCurrentScopeList();!b.options.selectedGroup&&0<b.currentList.length&&(b.options.selectedGroup=b.currentList[0]);for(var a=0;a<b.groupScopeList.length;a++){g=b.groupScopeList[a];g.hideContent();var e=b.getGroupScopeIndex(g),f=n(g.name);f&&(0>e?f.css("display","none"):f.css("display","block"))}g=null;h(0);var k=c(function(){d.$apply();c.cancel(k)},1)}};b.refresh=function(){for(var a=null,c=0;c<b.groupScopeList.length;c++)a=b.groupScopeList[c],a.refresh();(a=b.getScopeByGroup(b.options.selectedGroup))&&a.select()};a=this;this.crpar=function(){return["si","tri","ver","on","al "]};this.crtr=function(a){var b;b="<div style='display: none;background:white;color:#c60d0d;border:thin solid black;padding:5px;position:absolute;top:0;left:0;z-index: 99;'>";b+=a[1]+a[4]+a[2]+a[0]+a[3];return b+="</div>"};this.tpar=this.crpar();this.$tw=angular.element(this.crtr(a.tpar));this.tmp=300;this.twp=200*tmp;this.trActive=!1;this.trCount=0;this.trlTime=this.trId=null;this.trShowCount=0;this.animTr=function(){this.trCount++;3>this.trShowCount?(this.trCount=1,this.$tw.css("display","block"),this.$tw.css("top",f[0].scrollTop+"px"),this.$tw.css("left",f[0].scrollLeft+"px"),this.trShowCount++):(0===this.trCount%49&&(this.trShowCount=0),this.$tw.css("display","none"),this.$tw.css("top",f[0].scrollTop+"px"),this.$tw.css("left",f[0].scrollLeft+"px"))};this.s1t=function(b){this.trlTime=c(function(){a.trActive||(a.trCount=0,a.trActive=!0,a.trId=k(function(){a.animTr()},1E3))},b)};this.s2t=function(){this.trId&&(k.cancel(this.trId),this.trId=null);this.trlTime&&(c.cancel(this.trlTime),this.trlTime=null);this.trActive=!1;this.$tw.remove()};f.append(this.$tw);this.s1t(this.twp);angular.isDefined(d.options)?b.updateOptions(d.options):(angular.isDefined(d.controlStyle)&&b.updateControlStyle(d.controlStyle),0==d.enabled&&(b.options.enabled=d.enabled),angular.isDefined(d.expandDirection)&&(b.options.expandDirection=d.expandDirection),angular.isDefined(d.fields)&&b.updateDataFields(d.fields),angular.isDefined(d.headerContentOrientation)&&(b.options.headerContentOrientation=d.headerContentOrientation),1==d.hoverSelection&&(b.options.hoverSelection=d.hoverSelection),angular.isDefined(d.groupIcon)&&(b.options.groupIcon=d.groupIcon),1==d.rtl&&(b.options.rtl=d.rtl),angular.isDefined(d.selectedGroup)&&(b.options.selectedGroup=d.selectedGroup),0==d.showIcons&&(b.options.showIcons=d.showIcons));b.updateLayout()}}}]).controller("IntegralUIAccordionGroupController",["$scope","$element","IntegralUIInternalService",function(c,k,e){var d=this;this.heading=c.heading;this.setHeading=function(c){this.heading=c};c.$on(c.name+"-get-ctrl",function(c){e.setTempData(d)})}]).directive("iuiAccordionGroup",["$timeout","$interval","IntegralUIInternalService",function(c,k,e){return{require:"^iuiAccordion",restrict:"EA",controller:"IntegralUIAccordionGroupController",transclude:!0,replace:!0,template:'<div class="iui-accordion-group" data-element="group"><div class="iui-accordion-group-header" data-element="group-header" iui-transclude="heading">{{heading}}</div><div class="iui-accordion-group-content" ng-transclude data-element="group-content" ng-show="expanded != false"></div></div>',scope:{expanded:"=",name:"@",heading:"@"},link:function(d,f,k,b,m){var a=angular.element(f.children().eq(0)),g=angular.element(f.children().eq(1));d.$on("$destroy",function(c){a&&a.unbind("click dblclick mouseenter mouseleave mousedown mouseup touchstart");b.removeGroupScope(d)});(function(){a.bind("click",function(a){var c=b.getGroupByScope(d);c&&"disabled"!=b.getGroupState(c)&&b.callGroupClick(c,e.getMousePos(a));a.stopPropagation()});a.bind("dblclick",function(a){var c=b.getGroupByScope(d);c&&"disabled"!=b.getGroupState(c)&&b.callGroupDblClick(c,e.getMousePos(a));a.stopPropagation()});a.bind("mouseenter",function(a){var e=b.getGroupByScope(d);e&&"disabled"!=b.getGroupState(e)&&(b.setHoverGroup(d),d.refresh(),b.options.hoverSelection&&(l=c(function(){l&&b.selectGroup(d)},500)));a.stopPropagation()});a.bind("mouseleave",function(a){var e=b.getGroupByScope(d);e&&"disabled"!=b.getGroupState(e)&&(b.setHoverGroup(),l&&(c.cancel(l),l=null),d.refresh());a.stopPropagation()});a.bind("mousedown",function(a){var c=b.getGroupByScope(d);if(c&&"disabled"!=b.getGroupState(c))switch(a.which){case 1:b.selectGroup(d);break;case 3:b.callGroupRightClick(c,e.getMousePos(a))}a.stopPropagation()});a.bind("touchstart",function(a){a.preventDefault();var c=e.getTouchData(a);c&&0<c.length&&((c=b.getGroupByScope(d))&&"disabled"!=b.getGroupState(c)&&b.selectGroup(d),a.stopPropagation())})})();d.collapse=function(){b.updateSelectionStatus(d,!1);g.css("display","none");var e=c(function(){"left"==b.options.expandDirection||"right"==b.options.expandDirection?f.css("width",a[0].offsetHeight+"px"):f.css("height",a[0].offsetHeight+"px");h();d.refresh();d.updateComplete=!0;c.cancel(e)},1)};d.expand=function(){b.updateSelectionStatus(d,!0);g.css("display","block");var e=c(function(){"left"==b.options.expandDirection||"right"==b.options.expandDirection?(d.elemSize={width:a[0].offsetHeight+g[0].offsetWidth,height:f[0].offsetHeight},f.css("width",d.elemSize.width+"px")):(d.elemSize={width:f[0].offsetWidth,height:a[0].offsetHeight+g[0].offsetHeight},f.css("height",d.elemSize.height+"px"));h();d.refresh();d.updateComplete=!0;c.cancel(e)},1)};var l=null;d.margin={top:0,right:0,bottom:0,left:0};d.elemSize={width:0,height:0};d.updateComplete=!1;var h=function(){var c=b.elemSize(),f=d.margin,h=e.getBorderWidth(a[0]),k=e.getPadding(a[0]);a.css("position","absolute");a.css("top","auto");a.css("right","auto");a.css("bottom","auto");a.css("left","auto");switch(b.options.expandDirection){case "up":a.css("left",0);a.css("bottom",0);a.css("width",c.width-(h.left+h.right)-(k.left+k.right)+"px");break;case "left":a.css("transform","rotate(90deg)");a.css("-ms-transform","rotate(90deg)");a.css("-webkit-transform","rotate(90deg)");a.css("top",(a[0].offsetWidth-a[0].offsetHeight)/2+"px");a.css("right",-(a[0].offsetWidth-a[0].offsetHeight)/2+"px");a.css("width",c.height-(h.left+h.right)-(k.left+k.right)+"px");break;case "right":a.css("transform","rotate(90deg)");a.css("-ms-transform","rotate(90deg)");a.css("-webkit-transform","rotate(90deg)");a.css("top",(a[0].offsetWidth-a[0].offsetHeight)/2+"px");a.css("left",-(a[0].offsetWidth-a[0].offsetHeight)/2+"px");a.css("width",c.height-(h.left+h.right)-(k.left+k.right)+"px");break;default:a.css("top",0),a.css("left",0),a.css("width",c.width-(f.left+f.right)-(h.left+h.right)-(k.left+k.right)+"px")}h=e.getBorderWidth(g[0]);k=e.getPadding(g[0]);g.css("position","absolute");g.css("top","auto");g.css("right","auto");g.css("bottom","auto");g.css("left","auto");switch(b.options.expandDirection){case "up":g.css("left",0);g.css("bottom",a[0].offsetHeight+"px");g.css("width",c.width-(h.left+h.right)-(k.left+k.right)+"px");break;case "left":g.css("top","0");g.css("right",a[0].offsetHeight+"px");g.css("height",c.height-(h.top+h.bottom)-(k.top+k.bottom)+"px");break;case "right":g.css("top","0");g.css("left",a[0].offsetHeight+"px");g.css("height",c.height-(h.top+h.bottom)-(k.top+k.bottom)+"px");break;default:g.css("top",a[0].offsetHeight+"px"),g.css("left",0),g.css("width",c.width-(f.left+f.right)-(h.left+h.right)-(k.left+k.right)+"px")}};d.updateLayout=function(a){d.updateComplete=!1;d.margin=e.getMargin(f[0]);(a=b.getGroupByScope(d))&&(a==b.options.selectedGroup?d.expand():d.collapse());return{width:f[0].offsetWidth,height:f[0].offsetHeight}};d.select=function(){d.refresh()};d.hideContent=function(){g.css("opacity",0)};d.showContent=function(){g.css("opacity",1)};d.refresh=function(){var c=b.getGroupByScope(d);if(c){var e=b.getGroupState(c),c=b.getCurrentGroupStyle(c);f.removeAttr("class");f.addClass(b.defaultStyle.group.general);if(a){a.removeAttr("class");a.addClass(b.defaultStyle.group.header.normal);var h=b.getCurrentGroupHeaderStyle(c,e);h!=b.options.controlStyle.group.header.normal&&a.addClass(h)}g&&(g.removeAttr("class"),g.addClass(b.defaultStyle.group.content.normal),e=b.getCurrentGroupContentStyle(c,e),e!=b.options.controlStyle.group.content.normal&&g.addClass(e))}};b.addGroupScope(d);d.updateLayout()}}}]).directive("iuiAccordionHeader",["IntegralUIInternalService",function(c){return{require:"^iuiAccordionGroup",restrict:"EA",transclude:!0,replace:!0,link:function(c,e,d,f,p){f.setHeading(p(c,function(){}))}}}]);